<section class="home-section">
  <div class="bg-third"></div>
  <div class="overlay"></div>

  <div class="carrito-container">
    <h2 class="carrito-titulo">Carrito</h2>

    <!-- Carrito vacío -->
    <div *ngIf="carritoService.items().length === 0" class="carrito-vacio">
      <p>No hay productos en el carrito.</p>
      <button mat-raised-button color="primary" (click)="volverATienda()">Volver a la tienda</button>
    </div>

    <!-- Lista de productos -->
    <div *ngIf="carritoService.items().length > 0" class="carrito-lista">
      <div *ngFor="let p of carritoService.items()" class="carrito-item">
        <div class="item-info">
          <img *ngIf="p.imagen" [src]="p.imagen" alt="{{ p.nombre }}" class="item-img" />
          <div class="item-textos">
            <h4 class="item-nombre">{{ p.nombre }}</h4>
            <p class="item-precio">{{ p.precio | currency:'COP ':'symbol':'1.0-0' }}</p>
          </div>
        </div>

        <!-- Controles de cantidad -->
        <div class="item-cantidades">
          <button mat-mini-fab color="accent" (click)="cambiarCantidad(p, -1)">-</button>
          <span class="item-cantidad">{{ p.cantidad || 1 }}</span>
          <button mat-mini-fab color="accent" (click)="cambiarCantidad(p, 1)">+</button>
        </div>

        <!-- Botón eliminar -->
        <button mat-icon-button color="warn" (click)="remove(p.id)">
          <mat-icon>delete</mat-icon>
        </button>
      </div>
    </div>

    <hr *ngIf="carritoService.items().length > 0" class="divider">

    <!-- Resumen -->
    <div *ngIf="carritoService.items().length > 0" class="carrito-resumen">
      <h3 class="resumen-total">
        Total: <span class="resumen-valor">{{ totalPrice() | currency:'COP ':'symbol':'1.0-0' }}</span>
      </h3>

      <div class="resumen-acciones">
        <button mat-stroked-button color="primary" (click)="volverATienda()">Volver a la tienda</button>
        <button mat-stroked-button color="warn" (click)="clear()">Vaciar carrito</button>
        <button mat-raised-button color="accent" (click)="confirmarCompra()">Confirmar Compra</button>
      </div>
    </div>
  </div>
</section>
